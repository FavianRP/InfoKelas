{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/InfoKelas/frontend/app/components/MateriList.js"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { fetchMateri, addMateri, deleteMateri } from \"/data\";\r\n\r\nexport default function MateriList() {\r\n  const [materi, setMateri] = useState([]);\r\n  const [judul, setJudul] = useState(\"\");\r\n  const [deskripsi, setDeskripsi] = useState(\"\");\r\n  const [link, setLink] = useState(\"\");\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Cek role di localStorage\r\n    const role = localStorage.getItem(\"role\");\r\n    setIsAdmin(role === \"admin\");\r\n    loadMateri();\r\n  }, []);\r\n\r\n  async function loadMateri() {\r\n    const data = await fetchMateri();\r\n    setMateri(data);\r\n  }\r\n\r\n  async function handleAdd(e) {\r\n    e.preventDefault();\r\n    if (!isAdmin) return; // Non-admin tidak bisa menambah\r\n    if (!judul || !deskripsi) return;\r\n\r\n    const newMateri = {\r\n      judul,\r\n      isi: deskripsi,\r\n      file: link,\r\n      tanggal: new Date().toISOString().split(\"T\")[0], // default tanggal hari ini\r\n    };\r\n\r\n    const res = await addMateri(newMateri);\r\n    setMateri([...materi, { id: res.id, ...newMateri }]);\r\n\r\n    setJudul(\"\");\r\n    setDeskripsi(\"\");\r\n    setLink(\"\");\r\n  }\r\n\r\n  async function handleDelete(id) {\r\n    if (!isAdmin) return; // Non-admin tidak bisa hapus\r\n    await deleteMateri(id);\r\n    setMateri(materi.filter((m) => m.id !== id));\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <h2 className=\"text-2xl font-bold\">Materi</h2>\r\n\r\n      {/* FORM TAMBAH HANYA UNTUK ADMIN */}\r\n      {isAdmin && (\r\n        <form onSubmit={handleAdd} className=\"p-4 bg-gray-100 rounded space-y-2\">\r\n          <input\r\n            value={judul}\r\n            onChange={(e) => setJudul(e.target.value)}\r\n            placeholder=\"Judul\"\r\n            className=\"w-full border p-2 rounded\"\r\n            required\r\n          />\r\n          <textarea\r\n            value={deskripsi}\r\n            onChange={(e) => setDeskripsi(e.target.value)}\r\n            placeholder=\"Deskripsi\"\r\n            className=\"w-full border p-2 rounded\"\r\n            required\r\n          />\r\n          <input\r\n            value={link}\r\n            onChange={(e) => setLink(e.target.value)}\r\n            placeholder=\"Link / File (PDF, GDrive, dsb.)\"\r\n            className=\"w-full border p-2 rounded\"\r\n          />\r\n          <button\r\n            type=\"submit\"\r\n            className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-800\"\r\n          >\r\n            Tambah\r\n          </button>\r\n        </form>\r\n      )}\r\n\r\n      {/* LIST MATERI */}\r\n      <ul className=\"space-y-3\">\r\n        {materi.length === 0 ? (\r\n          <p className=\"text-gray-500\">Belum ada materi.</p>\r\n        ) : (\r\n          materi.map((m) => (\r\n            <li key={m.id} className=\"p-4 bg-gray-100 rounded shadow\">\r\n              <div className=\"flex justify-between items-start\">\r\n                <div>\r\n                  <p className=\"font-semibold\">{m.judul}</p>\r\n                  <p className=\"text-gray-600\">{m.isi}</p>\r\n                  {m.file && (\r\n                    m.file.endsWith(\".pdf\") ? (\r\n                      <iframe src={m.file} className=\"w-full h-48 border mt-2\"></iframe>\r\n                    ) : (\r\n                      <a\r\n                        href={m.file}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        className=\"text-blue-600 underline mt-2 block\"\r\n                      >\r\n                        Buka File\r\n                      </a>\r\n                    )\r\n                  )}\r\n                  <p className=\"text-sm text-gray-500 mt-1\">Tanggal: {m.tanggal}</p>\r\n                </div>\r\n\r\n                {/* TOMBOL HAPUS HANYA UNTUK ADMIN */}\r\n                {isAdmin && (\r\n                  <button\r\n                    onClick={() => handleDelete(m.id)}\r\n                    className=\"text-red-600 hover:underline\"\r\n                  >\r\n                    Hapus\r\n                  </button>\r\n                )}\r\n              </div>\r\n            </li>\r\n          ))\r\n        )}\r\n      </ul>\r\n\r\n      {/* INFO UNTUK NON-ADMIN */}\r\n      {!isAdmin && <p className=\"text-gray-500\">Hanya admin yang dapat menambah atau menghapus materi.</p>}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}