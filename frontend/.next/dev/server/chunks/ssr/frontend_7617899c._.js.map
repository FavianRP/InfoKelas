{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/InfoKelas/frontend/lib/data.js"],"sourcesContent":["const API_URL = \"http://localhost:5000\"; // backend SQLite\r\n\r\nfunction getTokenHeader() {\r\n  if (typeof window === 'undefined') return {}; // supaya SSR tidak error\r\n  const token = localStorage.getItem('token');\r\n  return token ? { 'Authorization': `Bearer ${token}` } : {};\r\n}\r\n\r\n// ------------------- TUGAS -------------------\r\n\r\n// Ambil semua tugas\r\nexport async function getAllTugas() {\r\n  const res = await fetch(`${API_URL}/tugas`, {\r\n    headers: getTokenHeader(),\r\n    cache: \"no-store\",\r\n  });\r\n  return res.json();\r\n}\r\n\r\n// Tambah tugas baru\r\nexport async function addTugas(tugas) {\r\n  const res = await fetch(`${API_URL}/tugas`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\", ...getTokenHeader() },\r\n    body: JSON.stringify(tugas),\r\n  });\r\n  return res.json();\r\n}\r\n\r\n// Hapus tugas\r\nexport async function deleteTugas(id) {\r\n  const res = await fetch(`${API_URL}/tugas/${id}`, {\r\n    method: \"DELETE\",\r\n    headers: getTokenHeader(),\r\n  });\r\n  return res.json();\r\n}\r\n\r\n// Update tugas (opsional)\r\nexport async function updateTugas(id, tugas) {\r\n  const res = await fetch(`${API_URL}/tugas/${id}`, {\r\n    method: \"PUT\",\r\n    headers: { \"Content-Type\": \"application/json\", ...getTokenHeader() },\r\n    body: JSON.stringify(tugas),\r\n  });\r\n  return res.json();\r\n}\r\n\r\n// ---------------------------------------------\r\n//                   JADWAL\r\n// ---------------------------------------------\r\nexport async function getAllJadwal() {\r\n  const res = await fetch(`${API_URL}/jadwal`, {\r\n    headers: getTokenHeader(),\r\n    cache: 'no-store',\r\n  });\r\n  return res.json();\r\n}\r\n\r\nexport async function addJadwal(data) {\r\n  const res = await fetch(`${API_URL}/jadwal`, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json', ...getTokenHeader() },\r\n    body: JSON.stringify(data),\r\n  });\r\n  return res.json();\r\n}\r\n\r\nexport async function deleteJadwal(id) {\r\n  const res = await fetch(`${API_URL}/jadwal/${id}`, {\r\n    method: 'DELETE',\r\n    headers: getTokenHeader(),\r\n  });\r\n  return res.json();\r\n}\r\n\r\n\r\n// ------------------- MATERI -------------------\r\n// Ambil semua materi\r\nexport async function fetchMateri() {\r\n  try {\r\n    const res = await fetch(`${API_URL}/materi`, {\r\n      headers: getTokenHeader()\r\n    });\r\n    if (!res.ok) throw new Error(\"Gagal fetch materi\");\r\n    return res.json();\r\n  } catch (error) {\r\n    console.error(\"Error fetchMateri:\", error);\r\n    return [];\r\n  }\r\n}\r\n\r\n// Ambil materi berdasarkan ID\r\nexport async function fetchMateriById(id) {\r\n  try {\r\n    const res = await fetch(`${API_URL}/materi/${id}`, {\r\n      headers: getTokenHeader()\r\n    });\r\n    if (!res.ok) return null;\r\n    return res.json();\r\n  } catch (error) {\r\n    console.error(\"Error fetchMateriById:\", error);\r\n    return null;\r\n  }\r\n}\r\n\r\n// Tambah materi baru\r\nexport async function addMateri(data) {\r\n  const res = await fetch(`${API_URL}/materi`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\", ...getTokenHeader() },\r\n    body: JSON.stringify(data)\r\n  });\r\n  return res.json();\r\n}\r\n\r\n// Update materi\r\nexport async function updateMateri(id, data) {\r\n  const res = await fetch(`${API_URL}/materi/${id}`, {\r\n    method: \"PUT\",\r\n    headers: { \"Content-Type\": \"application/json\", ...getTokenHeader() },\r\n    body: JSON.stringify(data)\r\n  });\r\n  return res.json();\r\n}\r\n\r\n// Hapus materi\r\nexport async function deleteMateri(id) {\r\n  const res = await fetch(`${API_URL}/materi/${id}`, {\r\n    method: \"DELETE\",\r\n    headers: getTokenHeader()\r\n  });\r\n  return res.json();\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 155, "column": 0}, "map": {"version":3,"sources":["file:///E:/InfoKelas/frontend/app/components/JadwalFilter.js"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { getAllJadwal, deleteJadwal, addJadwal } from '@/lib/data';\r\n\r\nconst DAYS = [\"Semua Hari\", \"Senin\", \"Selasa\", \"Rabu\", \"Kamis\", \"Jumat\", \"Sabtu\"];\r\n\r\nexport default function Jadwal() {\r\n  const [jadwalData, setJadwalData] = useState([]);\r\n  const [selectedDay, setSelectedDay] = useState('Semua Hari');\r\n  const [loading, setLoading] = useState(true);\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n  const [newJadwal, setNewJadwal] = useState({\r\n    mata_kuliah: '', hari: 'Senin', waktu_mulai: '', waktu_selesai: '', ruangan: '', dosen: ''\r\n  });\r\n  const [submitting, setSubmitting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const role = localStorage.getItem('role');\r\n    setIsAdmin(role === 'admin');\r\n  }, []);\r\n\r\n  const fetchJadwal = async () => {\r\n    setLoading(true);\r\n    const data = await getAllJadwal();\r\n    setJadwalData(data);\r\n    setLoading(false);\r\n  };\r\n\r\n  useEffect(() => { fetchJadwal(); }, []);\r\n\r\n  const filteredJadwal = jadwalData.filter(j => selectedDay === 'Semua Hari' || j.hari === selectedDay);\r\n\r\n  const handleAdd = async (e) => {\r\n    e.preventDefault();\r\n    if (!isAdmin) return;\r\n\r\n    setSubmitting(true);\r\n    try {\r\n      const added = await addJadwal(newJadwal);\r\n      setJadwalData([...jadwalData, added]);\r\n      setNewJadwal({ mata_kuliah: '', hari: 'Senin', waktu_mulai: '', waktu_selesai: '', ruangan: '', dosen: '' });\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert('Gagal menambah jadwal');\r\n    }\r\n    setSubmitting(false);\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!isAdmin) return;\r\n    if (!confirm(\"Apakah yakin ingin menghapus jadwal ini?\")) return;\r\n\r\n    try {\r\n      await deleteJadwal(id);\r\n      setJadwalData(jadwalData.filter(j => j.id !== id));\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert('Gagal menghapus jadwal');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 bg-white rounded-xl shadow-lg\">\r\n      <h2 className=\"text-2xl font-bold mb-4 text-indigo-700\">ðŸ“… Jadwal Kuliah</h2>\r\n\r\n      <div className=\"flex flex-wrap gap-2 mb-6\">\r\n        {DAYS.map(day => (\r\n          <button\r\n            key={day}\r\n            onClick={() => setSelectedDay(day)}\r\n            className={`px-4 py-2 text-sm font-medium rounded-full transition cursor-pointer ${\r\n              selectedDay === day\r\n                ? 'bg-indigo-600 text-white shadow-md'\r\n                : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n            }`}\r\n          >\r\n            {day}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {isAdmin && (\r\n        <form className=\"mb-6 space-y-2\" onSubmit={handleAdd}>\r\n          <div className=\"bg-gray-100 text-gray-900 grid grid-cols-1 sm:grid-cols-2 gap-2\">\r\n            <input type=\"text\" placeholder=\"Mata Kuliah\" value={newJadwal.mata_kuliah} onChange={e => setNewJadwal({ ...newJadwal, mata_kuliah: e.target.value })} required className=\"border p-2 rounded\" />\r\n            <select value={newJadwal.hari} onChange={e => setNewJadwal({ ...newJadwal, hari: e.target.value })} className=\"border p-2 rounded\">\r\n              {DAYS.slice(1).map(day => <option key={day} value={day}>{day}</option>)}\r\n            </select>\r\n            <input type=\"time\" value={newJadwal.waktu_mulai} onChange={e => setNewJadwal({ ...newJadwal, waktu_mulai: e.target.value })} required className=\"border p-2 rounded\" />\r\n            <input type=\"time\" value={newJadwal.waktu_selesai} onChange={e => setNewJadwal({ ...newJadwal, waktu_selesai: e.target.value })} required className=\"border p-2 rounded\" />\r\n            <input type=\"text\" placeholder=\"Ruangan\" value={newJadwal.ruangan} onChange={e => setNewJadwal({ ...newJadwal, ruangan: e.target.value })} required className=\"border p-2 rounded\" />\r\n            <input type=\"text\" placeholder=\"Dosen\" value={newJadwal.dosen} onChange={e => setNewJadwal({ ...newJadwal, dosen: e.target.value })} required className=\"border p-2 rounded\" />\r\n          </div>\r\n          <button type=\"submit\" disabled={submitting} className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\r\n            {submitting ? 'Menyimpan...' : 'Tambah Jadwal'}\r\n          </button>\r\n        </form>\r\n      )}\r\n\r\n      {loading ? <p className=\"text-gray-500\">Loading...</p> :\r\n        filteredJadwal.length > 0 ? (\r\n          <div className=\"space-y-4\">\r\n            {filteredJadwal.map(item => (\r\n              <div key={item.id} className=\"border-l-4 border-indigo-400 p-4 bg-gray-50 hover:bg-gray-100 transition rounded-md flex justify-between items-start\">\r\n                <div>\r\n                  <h3 className=\"text-lg font-semibold text-gray-800\">{item.mata_kuliah}</h3>\r\n                  <p className=\"text-sm text-gray-600 mt-1\">\r\n                    <strong>{item.hari}</strong> | {item.waktu_mulai} - {item.waktu_selesai} WIB | Ruangan: {item.ruangan} | Dosen: {item.dosen}\r\n                  </p>\r\n                </div>\r\n                {isAdmin && (\r\n                  <button onClick={() => handleDelete(item.id)} className=\"text-red-500 hover:text-red-700 font-bold cursor-pointer\">\r\n                    Hapus\r\n                  </button>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <p className=\"text-center py-10 text-gray-500\">Tidak ada jadwal pada hari <strong>{selectedDay}</strong>.</p>\r\n        )\r\n      }\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}