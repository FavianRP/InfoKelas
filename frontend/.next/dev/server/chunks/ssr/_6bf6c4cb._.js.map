{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/InfoKelas/frontend/lib/data.js"],"sourcesContent":["const API_URL = \"http://localhost:5000\"; // backend SQLite\r\n\r\nfunction getTokenHeader() {\r\n  const token = localStorage.getItem(\"token\");\r\n  return token ? { \"Authorization\": `Bearer ${token}` } : {};\r\n}\r\n\r\n// ------------------- TUGAS -------------------\r\n\r\n// Ambil semua tugas\r\nexport async function getAllTugas() {\r\n  const res = await fetch(`${API_URL}/tugas`, {\r\n    headers: getTokenHeader(),\r\n    cache: \"no-store\",\r\n  });\r\n  return res.json();\r\n}\r\n\r\n// Tambah tugas baru\r\nexport async function addTugas(tugas) {\r\n  const res = await fetch(`${API_URL}/tugas`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\", ...getTokenHeader() },\r\n    body: JSON.stringify(tugas),\r\n  });\r\n  return res.json();\r\n}\r\n\r\n// Hapus tugas\r\nexport async function deleteTugas(id) {\r\n  const res = await fetch(`${API_URL}/tugas/${id}`, {\r\n    method: \"DELETE\",\r\n    headers: getTokenHeader(),\r\n  });\r\n  return res.json();\r\n}\r\n\r\n// Update tugas (opsional)\r\nexport async function updateTugas(id, tugas) {\r\n  const res = await fetch(`${API_URL}/tugas/${id}`, {\r\n    method: \"PUT\",\r\n    headers: { \"Content-Type\": \"application/json\", ...getTokenHeader() },\r\n    body: JSON.stringify(tugas),\r\n  });\r\n  return res.json();\r\n}\r\n\r\n// ---------------------------------------------\r\n//                   JADWAL\r\n// ---------------------------------------------\r\nexport async function getAllJadwal() {\r\n  const res = await fetch(`${API_URL}/jadwal`, { headers: getTokenHeader() });\r\n  return res.json();\r\n}\r\n\r\nexport async function addJadwal(data) {\r\n  const res = await fetch(`${API_URL}/jadwal`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\", ...getTokenHeader() },\r\n    body: JSON.stringify(data)\r\n  });\r\n  return res.json();\r\n}\r\n\r\nexport async function updateJadwal(id, jadwal) {\r\n  const res = await fetch(`${API_URL}/jadwal/${id}`, {\r\n    method: \"PUT\",\r\n    headers: { \"Content-Type\": \"application/json\", ...getTokenHeader() },\r\n    body: JSON.stringify(jadwal)\r\n  });\r\n  return res.json();\r\n}\r\n\r\nexport async function deleteJadwal(id) {\r\n  const res = await fetch(`${API_URL}/jadwal/${id}`, {\r\n    method: \"DELETE\",\r\n    headers: getTokenHeader()\r\n  });\r\n  return res.json();\r\n}\r\n\r\n// ------------------- MATERI -------------------\r\n// Ambil semua materi\r\nexport async function fetchMateri() {\r\n  try {\r\n    const res = await fetch(`${API_URL}/materi`, {\r\n      headers: getTokenHeader()\r\n    });\r\n    if (!res.ok) throw new Error(\"Gagal fetch materi\");\r\n    return res.json();\r\n  } catch (error) {\r\n    console.error(\"Error fetchMateri:\", error);\r\n    return [];\r\n  }\r\n}\r\n\r\n// Ambil materi berdasarkan ID\r\nexport async function fetchMateriById(id) {\r\n  try {\r\n    const res = await fetch(`${API_URL}/materi/${id}`, {\r\n      headers: getTokenHeader()\r\n    });\r\n    if (!res.ok) return null;\r\n    return res.json();\r\n  } catch (error) {\r\n    console.error(\"Error fetchMateriById:\", error);\r\n    return null;\r\n  }\r\n}\r\n\r\n// Tambah materi baru\r\nexport async function addMateri(data) {\r\n  const res = await fetch(`${API_URL}/materi`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\", ...getTokenHeader() },\r\n    body: JSON.stringify(data)\r\n  });\r\n  return res.json();\r\n}\r\n\r\n// Update materi\r\nexport async function updateMateri(id, data) {\r\n  const res = await fetch(`${API_URL}/materi/${id}`, {\r\n    method: \"PUT\",\r\n    headers: { \"Content-Type\": \"application/json\", ...getTokenHeader() },\r\n    body: JSON.stringify(data)\r\n  });\r\n  return res.json();\r\n}\r\n\r\n// Hapus materi\r\nexport async function deleteMateri(id) {\r\n  const res = await fetch(`${API_URL}/materi/${id}`, {\r\n    method: \"DELETE\",\r\n    headers: getTokenHeader()\r\n  });\r\n  return res.json();\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAM,UAAU,yBAAyB,iBAAiB;AAE1D,SAAS;IACP,MAAM,QAAQ,aAAa,OAAO,CAAC;IACnC,OAAO,QAAQ;QAAE,iBAAiB,CAAC,OAAO,EAAE,OAAO;IAAC,IAAI,CAAC;AAC3D;AAKO,eAAe;IACpB,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,MAAM,CAAC,EAAE;QAC1C,SAAS;QACT,OAAO;IACT;IACA,OAAO,IAAI,IAAI;AACjB;AAGO,eAAe,SAAS,KAAK;IAClC,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,MAAM,CAAC,EAAE;QAC1C,QAAQ;QACR,SAAS;YAAE,gBAAgB;YAAoB,GAAG,gBAAgB;QAAC;QACnE,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,OAAO,IAAI,IAAI;AACjB;AAGO,eAAe,YAAY,EAAE;IAClC,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,OAAO,EAAE,IAAI,EAAE;QAChD,QAAQ;QACR,SAAS;IACX;IACA,OAAO,IAAI,IAAI;AACjB;AAGO,eAAe,YAAY,EAAE,EAAE,KAAK;IACzC,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,OAAO,EAAE,IAAI,EAAE;QAChD,QAAQ;QACR,SAAS;YAAE,gBAAgB;YAAoB,GAAG,gBAAgB;QAAC;QACnE,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,OAAO,IAAI,IAAI;AACjB;AAKO,eAAe;IACpB,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,OAAO,CAAC,EAAE;QAAE,SAAS;IAAiB;IACzE,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,UAAU,IAAI;IAClC,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,OAAO,CAAC,EAAE;QAC3C,QAAQ;QACR,SAAS;YAAE,gBAAgB;YAAoB,GAAG,gBAAgB;QAAC;QACnE,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,aAAa,EAAE,EAAE,MAAM;IAC3C,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,QAAQ,EAAE,IAAI,EAAE;QACjD,QAAQ;QACR,SAAS;YAAE,gBAAgB;YAAoB,GAAG,gBAAgB;QAAC;QACnE,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,aAAa,EAAE;IACnC,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,QAAQ,EAAE,IAAI,EAAE;QACjD,QAAQ;QACR,SAAS;IACX;IACA,OAAO,IAAI,IAAI;AACjB;AAIO,eAAe;IACpB,IAAI;QACF,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,OAAO,CAAC,EAAE;YAC3C,SAAS;QACX;QACA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;QAC7B,OAAO,IAAI,IAAI;IACjB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sBAAsB;QACpC,OAAO,EAAE;IACX;AACF;AAGO,eAAe,gBAAgB,EAAE;IACtC,IAAI;QACF,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,QAAQ,EAAE,IAAI,EAAE;YACjD,SAAS;QACX;QACA,IAAI,CAAC,IAAI,EAAE,EAAE,OAAO;QACpB,OAAO,IAAI,IAAI;IACjB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO;IACT;AACF;AAGO,eAAe,UAAU,IAAI;IAClC,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,OAAO,CAAC,EAAE;QAC3C,QAAQ;QACR,SAAS;YAAE,gBAAgB;YAAoB,GAAG,gBAAgB;QAAC;QACnE,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,OAAO,IAAI,IAAI;AACjB;AAGO,eAAe,aAAa,EAAE,EAAE,IAAI;IACzC,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,QAAQ,EAAE,IAAI,EAAE;QACjD,QAAQ;QACR,SAAS;YAAE,gBAAgB;YAAoB,GAAG,gBAAgB;QAAC;QACnE,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,OAAO,IAAI,IAAI;AACjB;AAGO,eAAe,aAAa,EAAE;IACnC,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,QAAQ,EAAE,IAAI,EAAE;QACjD,QAAQ;QACR,SAAS;IACX;IACA,OAAO,IAAI,IAAI;AACjB"}},
    {"offset": {"line": 167, "column": 0}, "map": {"version":3,"sources":["file:///E:/InfoKelas/frontend/app/components/MateriList.js"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { addMateri, deleteMateri, updateMateri } from \"@/lib/data\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function MateriList({ initialMateri }) {\r\n  const router = useRouter();\r\n  const [materi, setMateri] = useState(initialMateri || []);\r\n  const [form, setForm] = useState({\r\n    judul: \"\",\r\n    deskripsi: \"\",\r\n    link: \"\",\r\n    tanggal: \"\",\r\n  });\r\n\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const role = localStorage.getItem(\"role\");\r\n    setIsAdmin(role === \"admin\");\r\n  }, []);\r\n\r\nconst handleAdd = async (e) => {\r\n  e.preventDefault();\r\n  if (!isAdmin) return;\r\n\r\n  const payload = {\r\n    judul: form.judul,\r\n    isi: form.deskripsi,\r\n    file: form.link,\r\n    tanggal: form.tanggal,\r\n  };\r\n\r\n  const newMateri = await addMateri(payload);\r\n  \r\n  // ✅ Gunakan struktur yang sama dengan database\r\n  setMateri([...materi, { \r\n    id: newMateri.id, \r\n    judul: payload.judul,\r\n    isi: payload.isi,      // ← gunakan \"isi\" bukan \"deskripsi\"\r\n    file: payload.file,\r\n    tanggal: payload.tanggal\r\n  }]);\r\n\r\n  setForm({ judul: \"\", deskripsi: \"\", link: \"\", tanggal: \"\" });\r\n};\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!isAdmin) return;\r\n    await deleteMateri(id);\r\n    setMateri(materi.filter((m) => m.id !== id));\r\n  };\r\n\r\n  const handleClickCard = (id) => {\r\n    router.push(`/materi/${id}`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6 \">\r\n\r\n      {/* === FORM TAMBAH MATERI === */}\r\n      {isAdmin && (\r\n        <form\r\n          onSubmit={handleAdd}\r\n          className=\"p-4 text-gray-900 bg-gray-100 rounded-lg shadow space-y-3\"\r\n        >\r\n          <h2 className=\"font-bold text-lg\">Tambah Materi</h2>\r\n\r\n          {/* JUDUL */}\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Judul\"\r\n            value={form.judul}\r\n            onChange={(e) => setForm({ ...form, judul: e.target.value })}\r\n            className=\"w-full border p-2 rounded\"\r\n            required\r\n          />\r\n\r\n          {/* DESKRIPSI */}\r\n          <textarea\r\n            placeholder=\"Deskripsi materi\"\r\n            value={form.deskripsi}\r\n            onChange={(e) => setForm({ ...form, deskripsi: e.target.value })}\r\n            className=\"w-full border p-2 rounded\"\r\n            required\r\n          />\r\n\r\n          {/* LINK FILE */}\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Link file (Google Drive, PDF, dll)\"\r\n            value={form.link}\r\n            onChange={(e) => setForm({ ...form, link: e.target.value })}\r\n            className=\"w-full border p-2 rounded\"\r\n            required\r\n          />\r\n\r\n          {/* PREVIEW FILE */}\r\n          {form.link && (\r\n            <div className=\"mt-2 p-3 border rounded bg-white\">\r\n              <p className=\"font-semibold text-gray-700 mb-1\">Preview File:</p>\r\n\r\n              {/* If PDF */}\r\n              {form.link.endsWith(\".pdf\") ? (\r\n                <iframe\r\n                  src={form.link}\r\n                  className=\"w-full h-72 border\"\r\n                ></iframe>\r\n              ) : (\r\n                <a\r\n                  href={form.link}\r\n                  target=\"_blank\"\r\n                  className=\"text-blue-600 underline\"\r\n                  rel=\"noopener noreferrer\"\r\n                >\r\n                  Buka File\r\n                </a>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* TANGGAL */}\r\n          <input\r\n            type=\"date\"\r\n            value={form.tanggal}\r\n            onChange={(e) => setForm({ ...form, tanggal: e.target.value })}\r\n            className=\"w-full border p-2 rounded\"\r\n            required\r\n          />\r\n\r\n          <button\r\n            type=\"submit\"\r\n            className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-800 cursor-pointer\"\r\n          >\r\n            Tambah\r\n          </button>\r\n        </form>\r\n      )}\r\n\r\n      {/* === LIST MATERI === */}\r\n      <ul className=\"space-y-3\">\r\n        {materi.length === 0 ? (\r\n          <p className=\"text-gray-500\">Belum ada materi.</p>\r\n        ) : (\r\n          materi.map((m) => (\r\n            <li\r\n              key={m.id}\r\n              className=\"p-4 text-gray-900 bg-gray-100 rounded-lg shadow cursor-pointer hover:bg-gray-200\"\r\n              onClick={() => handleClickCard(m.id)}\r\n            >\r\n              <div className=\"flex justify-between items-center\">\r\n                <p className=\"font-semibold\">{m.judul}</p>\r\n                {isAdmin && (\r\n                  <button\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      handleDelete(m.id);\r\n                    }}\r\n                    className=\"text-red-500 hover:text-red-700 font-bold cursor-pointer\"\r\n                  >\r\n                    Hapus\r\n                  </button>\r\n                )}\r\n              </div>\r\n\r\n              {/* Deskripsi kecil */}\r\n              <p className=\"text-sm text-gray-600\">{m.isi}</p>\r\n\r\n              <p className=\"text-sm text-gray-500 mt-1\">Tanggal: {m.tanggal}</p>\r\n            </li>\r\n          ))\r\n        )}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}