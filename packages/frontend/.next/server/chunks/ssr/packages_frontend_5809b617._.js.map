{"version":3,"sources":["../../../../../../packages/frontend/lib/data.js","../../../../../../packages/frontend/app/components/TugasList.js"],"sourcesContent":["const API_URL = \"http://localhost:5000\"; // backend SQLite\r\n\r\nfunction getTokenHeader() {\r\n  if (typeof window === 'undefined') return {}; // supaya SSR tidak error\r\n  const token = localStorage.getItem('token');\r\n  return token ? { 'Authorization': `Bearer ${token}` } : {};\r\n}\r\n\r\n// ------------------- TUGAS -------------------\r\n\r\n// Ambil semua tugas\r\nexport async function getAllTugas() {\r\n  const res = await fetch(`${API_URL}/tugas`, {\r\n    headers: getTokenHeader(),\r\n    cache: \"no-store\",\r\n  });\r\n  return res.json();\r\n}\r\n\r\n// Tambah tugas baru\r\nexport async function addTugas(tugas) {\r\n  const res = await fetch(`${API_URL}/tugas`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\", ...getTokenHeader() },\r\n    body: JSON.stringify(tugas),\r\n  });\r\n  return res.json();\r\n}\r\n\r\n// Hapus tugas\r\nexport async function deleteTugas(id) {\r\n  const res = await fetch(`${API_URL}/tugas/${id}`, {\r\n    method: \"DELETE\",\r\n    headers: getTokenHeader(),\r\n  });\r\n  return res.json();\r\n}\r\n\r\n// Update tugas (opsional)\r\nexport async function updateTugas(id, tugas) {\r\n  const res = await fetch(`${API_URL}/tugas/${id}`, {\r\n    method: \"PUT\",\r\n    headers: { \"Content-Type\": \"application/json\", ...getTokenHeader() },\r\n    body: JSON.stringify(tugas),\r\n  });\r\n  return res.json();\r\n}\r\n\r\n// ---------------------------------------------\r\n//                   JADWAL\r\n// ---------------------------------------------\r\nexport async function getAllJadwal() {\r\n  const res = await fetch(`${API_URL}/jadwal`, {\r\n    headers: getTokenHeader(),\r\n    cache: 'no-store',\r\n  });\r\n  return res.json();\r\n}\r\n\r\nexport async function addJadwal(data) {\r\n  const res = await fetch(`${API_URL}/jadwal`, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json', ...getTokenHeader() },\r\n    body: JSON.stringify(data),\r\n  });\r\n  return res.json();\r\n}\r\n\r\nexport async function deleteJadwal(id) {\r\n  const res = await fetch(`${API_URL}/jadwal/${id}`, {\r\n    method: 'DELETE',\r\n    headers: getTokenHeader(),\r\n  });\r\n  return res.json();\r\n}\r\n\r\n\r\n// ------------------- MATERI -------------------\r\n// Ambil semua materi\r\nexport async function fetchMateri() {\r\n  try {\r\n    const res = await fetch(`${API_URL}/materi`, {\r\n      headers: getTokenHeader()\r\n    });\r\n    if (!res.ok) throw new Error(\"Gagal fetch materi\");\r\n    return res.json();\r\n  } catch (error) {\r\n    console.error(\"Error fetchMateri:\", error);\r\n    return [];\r\n  }\r\n}\r\n\r\n// Ambil materi berdasarkan ID\r\nexport async function fetchMateriById(id) {\r\n  try {\r\n    const res = await fetch(`${API_URL}/materi/${id}`, {\r\n      headers: getTokenHeader()\r\n    });\r\n    if (!res.ok) return null;\r\n    return res.json();\r\n  } catch (error) {\r\n    console.error(\"Error fetchMateriById:\", error);\r\n    return null;\r\n  }\r\n}\r\n\r\n// Tambah materi baru\r\nexport async function addMateri(data) {\r\n  const res = await fetch(`${API_URL}/materi`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\", ...getTokenHeader() },\r\n    body: JSON.stringify(data)\r\n  });\r\n  return res.json();\r\n}\r\n\r\n// Update materi\r\nexport async function updateMateri(id, data) {\r\n  const res = await fetch(`${API_URL}/materi/${id}`, {\r\n    method: \"PUT\",\r\n    headers: { \"Content-Type\": \"application/json\", ...getTokenHeader() },\r\n    body: JSON.stringify(data)\r\n  });\r\n  return res.json();\r\n}\r\n\r\n// Hapus materi\r\nexport async function deleteMateri(id) {\r\n  const res = await fetch(`${API_URL}/materi/${id}`, {\r\n    method: \"DELETE\",\r\n    headers: getTokenHeader()\r\n  });\r\n  return res.json();\r\n}\r\n","\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { addTugas, deleteTugas } from \"@/lib/data\";\r\n\r\nexport default function TugasList({ initialTugas }) {\r\n  const router = useRouter();\r\n  const [tugas, setTugas] = useState(initialTugas || []);\r\n  const [form, setForm] = useState({ judul: \"\", deskripsi: \"\", deadline: \"\" });\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const role = localStorage.getItem(\"role\");\r\n    setIsAdmin(role === \"admin\");\r\n  }, []);\r\n\r\n  const handleAdd = async (e) => {\r\n    e.preventDefault();\r\n    if (!isAdmin) return;\r\n\r\n    setLoading(true);\r\n    try {\r\n      const newTugas = await addTugas({ ...form, status: \"Belum Selesai\" });\r\n      setTugas([...tugas, newTugas]);\r\n      setForm({ judul: \"\", deskripsi: \"\", deadline: \"\" });\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"Gagal menambahkan tugas\");\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!isAdmin) return;\r\n    if (!confirm(\"Apakah yakin ingin menghapus tugas ini?\")) return;\r\n\r\n    setLoading(true);\r\n    try {\r\n      await deleteTugas(id);\r\n      setTugas(tugas.filter((t) => t.id !== id));\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"Gagal menghapus tugas\");\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {isAdmin && (\r\n        <form onSubmit={handleAdd} className=\"p-4 bg-gray-100 rounded-lg shadow space-y-3\">\r\n          <h2 className=\"font-bold text-lg text-gray-800\">Tambah Tugas</h2>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Judul\"\r\n            value={form.judul}\r\n            onChange={(e) => setForm({ ...form, judul: e.target.value })}\r\n            className=\"w-full border p-2 rounded text-gray-800\"\r\n            required\r\n          />\r\n          <textarea\r\n            placeholder=\"Deskripsi\"\r\n            value={form.deskripsi}\r\n            onChange={(e) => setForm({ ...form, deskripsi: e.target.value })}\r\n            className=\"w-full border p-2 rounded text-gray-800\"\r\n            required\r\n          />\r\n          <input\r\n            type=\"date\"\r\n            value={form.deadline}\r\n            onChange={(e) => setForm({ ...form, deadline: e.target.value })}\r\n            className=\"w-full border p-2 rounded text-gray-800\"\r\n            required\r\n          />\r\n          <button\r\n            type=\"submit\"\r\n            disabled={loading}\r\n            className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-800 transition\"\r\n          >\r\n            {loading ? \"Menyimpan...\" : \"Tambah\"}\r\n          </button>\r\n        </form>\r\n      )}\r\n\r\n      <ul className=\"space-y-3\">\r\n        {tugas.map((t) => (\r\n          <li key={t.id} className=\"p-4 bg-gray-100 rounded-lg shadow flex justify-between items-center\">\r\n            <div>\r\n              <p className=\"font-semibold text-gray-800\">{t.judul}</p>\r\n              <p className=\"text-sm text-gray-600\">{t.deskripsi}</p>\r\n              <p className=\"text-sm text-gray-500\">Deadline: {t.deadline}</p>\r\n            </div>\r\n            {isAdmin && (\r\n              <button\r\n                onClick={() => handleDelete(t.id)}\r\n                className=\"text-red-500 hover:text-red-700 font-bold cursor-pointer\"\r\n              >\r\n                Hapus\r\n              </button>\r\n            )}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}