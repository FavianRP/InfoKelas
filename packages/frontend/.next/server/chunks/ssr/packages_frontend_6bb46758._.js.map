{"version":3,"sources":["../../../../../../packages/frontend/lib/data.js","../../../../../../packages/frontend/app/components/JadwalFilter.js"],"sourcesContent":["const API_URL = \"http://localhost:5000\"; // backend SQLite\r\n\r\nfunction getTokenHeader() {\r\n  if (typeof window === 'undefined') return {}; // supaya SSR tidak error\r\n  const token = localStorage.getItem('token');\r\n  return token ? { 'Authorization': `Bearer ${token}` } : {};\r\n}\r\n\r\n// ------------------- TUGAS -------------------\r\n\r\n// Ambil semua tugas\r\nexport async function getAllTugas() {\r\n  const res = await fetch(`${API_URL}/tugas`, {\r\n    headers: getTokenHeader(),\r\n    cache: \"no-store\",\r\n  });\r\n  return res.json();\r\n}\r\n\r\n// Tambah tugas baru\r\nexport async function addTugas(tugas) {\r\n  const res = await fetch(`${API_URL}/tugas`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\", ...getTokenHeader() },\r\n    body: JSON.stringify(tugas),\r\n  });\r\n  return res.json();\r\n}\r\n\r\n// Hapus tugas\r\nexport async function deleteTugas(id) {\r\n  const res = await fetch(`${API_URL}/tugas/${id}`, {\r\n    method: \"DELETE\",\r\n    headers: getTokenHeader(),\r\n  });\r\n  return res.json();\r\n}\r\n\r\n// Update tugas (opsional)\r\nexport async function updateTugas(id, tugas) {\r\n  const res = await fetch(`${API_URL}/tugas/${id}`, {\r\n    method: \"PUT\",\r\n    headers: { \"Content-Type\": \"application/json\", ...getTokenHeader() },\r\n    body: JSON.stringify(tugas),\r\n  });\r\n  return res.json();\r\n}\r\n\r\n// ---------------------------------------------\r\n//                   JADWAL\r\n// ---------------------------------------------\r\nexport async function getAllJadwal() {\r\n  const res = await fetch(`${API_URL}/jadwal`, {\r\n    headers: getTokenHeader(),\r\n    cache: 'no-store',\r\n  });\r\n  return res.json();\r\n}\r\n\r\nexport async function addJadwal(data) {\r\n  const res = await fetch(`${API_URL}/jadwal`, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json', ...getTokenHeader() },\r\n    body: JSON.stringify(data),\r\n  });\r\n  return res.json();\r\n}\r\n\r\nexport async function deleteJadwal(id) {\r\n  const res = await fetch(`${API_URL}/jadwal/${id}`, {\r\n    method: 'DELETE',\r\n    headers: getTokenHeader(),\r\n  });\r\n  return res.json();\r\n}\r\n\r\n\r\n// ------------------- MATERI -------------------\r\n// Ambil semua materi\r\nexport async function fetchMateri() {\r\n  try {\r\n    const res = await fetch(`${API_URL}/materi`, {\r\n      headers: getTokenHeader()\r\n    });\r\n    if (!res.ok) throw new Error(\"Gagal fetch materi\");\r\n    return res.json();\r\n  } catch (error) {\r\n    console.error(\"Error fetchMateri:\", error);\r\n    return [];\r\n  }\r\n}\r\n\r\n// Ambil materi berdasarkan ID\r\nexport async function fetchMateriById(id) {\r\n  try {\r\n    const res = await fetch(`${API_URL}/materi/${id}`, {\r\n      headers: getTokenHeader()\r\n    });\r\n    if (!res.ok) return null;\r\n    return res.json();\r\n  } catch (error) {\r\n    console.error(\"Error fetchMateriById:\", error);\r\n    return null;\r\n  }\r\n}\r\n\r\n// Tambah materi baru\r\nexport async function addMateri(data) {\r\n  const res = await fetch(`${API_URL}/materi`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\", ...getTokenHeader() },\r\n    body: JSON.stringify(data)\r\n  });\r\n  return res.json();\r\n}\r\n\r\n// Update materi\r\nexport async function updateMateri(id, data) {\r\n  const res = await fetch(`${API_URL}/materi/${id}`, {\r\n    method: \"PUT\",\r\n    headers: { \"Content-Type\": \"application/json\", ...getTokenHeader() },\r\n    body: JSON.stringify(data)\r\n  });\r\n  return res.json();\r\n}\r\n\r\n// Hapus materi\r\nexport async function deleteMateri(id) {\r\n  const res = await fetch(`${API_URL}/materi/${id}`, {\r\n    method: \"DELETE\",\r\n    headers: getTokenHeader()\r\n  });\r\n  return res.json();\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { getAllJadwal, deleteJadwal, addJadwal } from '@/lib/data';\r\n\r\nconst DAYS = [\"Semua Hari\", \"Senin\", \"Selasa\", \"Rabu\", \"Kamis\", \"Jumat\", \"Sabtu\"];\r\n\r\nexport default function Jadwal() {\r\n  const [jadwalData, setJadwalData] = useState([]);\r\n  const [selectedDay, setSelectedDay] = useState('Semua Hari');\r\n  const [loading, setLoading] = useState(true);\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n  const [newJadwal, setNewJadwal] = useState({\r\n    mata_kuliah: '', hari: 'Senin', waktu_mulai: '', waktu_selesai: '', ruangan: '', dosen: ''\r\n  });\r\n  const [submitting, setSubmitting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const role = localStorage.getItem('role');\r\n    setIsAdmin(role === 'admin');\r\n  }, []);\r\n\r\n  const fetchJadwal = async () => {\r\n    setLoading(true);\r\n    const data = await getAllJadwal();\r\n    setJadwalData(data);\r\n    setLoading(false);\r\n  };\r\n\r\n  useEffect(() => { fetchJadwal(); }, []);\r\n\r\n  const filteredJadwal = jadwalData.filter(j => selectedDay === 'Semua Hari' || j.hari === selectedDay);\r\n\r\n  const handleAdd = async (e) => {\r\n    e.preventDefault();\r\n    if (!isAdmin) return;\r\n\r\n    setSubmitting(true);\r\n    try {\r\n      const added = await addJadwal(newJadwal);\r\n      setJadwalData([...jadwalData, added]);\r\n      setNewJadwal({ mata_kuliah: '', hari: 'Senin', waktu_mulai: '', waktu_selesai: '', ruangan: '', dosen: '' });\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert('Gagal menambah jadwal');\r\n    }\r\n    setSubmitting(false);\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!isAdmin) return;\r\n    if (!confirm(\"Apakah yakin ingin menghapus jadwal ini?\")) return;\r\n\r\n    try {\r\n      await deleteJadwal(id);\r\n      setJadwalData(jadwalData.filter(j => j.id !== id));\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert('Gagal menghapus jadwal');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 bg-white rounded-xl shadow-lg\">\r\n      <h2 className=\"text-2xl font-bold mb-4 text-indigo-700\">ðŸ“… Jadwal Kuliah</h2>\r\n\r\n      <div className=\"flex flex-wrap gap-2 mb-6\">\r\n        {DAYS.map(day => (\r\n          <button\r\n            key={day}\r\n            onClick={() => setSelectedDay(day)}\r\n            className={`px-4 py-2 text-sm font-medium rounded-full transition cursor-pointer ${\r\n              selectedDay === day\r\n                ? 'bg-indigo-600 text-white shadow-md'\r\n                : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n            }`}\r\n          >\r\n            {day}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {isAdmin && (\r\n        <form className=\"mb-6 space-y-2\" onSubmit={handleAdd}>\r\n          <div className=\"bg-gray-100 text-gray-900 grid grid-cols-1 sm:grid-cols-2 gap-2\">\r\n            <input type=\"text\" placeholder=\"Mata Kuliah\" value={newJadwal.mata_kuliah} onChange={e => setNewJadwal({ ...newJadwal, mata_kuliah: e.target.value })} required className=\"border p-2 rounded\" />\r\n            <select value={newJadwal.hari} onChange={e => setNewJadwal({ ...newJadwal, hari: e.target.value })} className=\"border p-2 rounded\">\r\n              {DAYS.slice(1).map(day => <option key={day} value={day}>{day}</option>)}\r\n            </select>\r\n            <input type=\"time\" value={newJadwal.waktu_mulai} onChange={e => setNewJadwal({ ...newJadwal, waktu_mulai: e.target.value })} required className=\"border p-2 rounded\" />\r\n            <input type=\"time\" value={newJadwal.waktu_selesai} onChange={e => setNewJadwal({ ...newJadwal, waktu_selesai: e.target.value })} required className=\"border p-2 rounded\" />\r\n            <input type=\"text\" placeholder=\"Ruangan\" value={newJadwal.ruangan} onChange={e => setNewJadwal({ ...newJadwal, ruangan: e.target.value })} required className=\"border p-2 rounded\" />\r\n            <input type=\"text\" placeholder=\"Dosen\" value={newJadwal.dosen} onChange={e => setNewJadwal({ ...newJadwal, dosen: e.target.value })} required className=\"border p-2 rounded\" />\r\n          </div>\r\n          <button type=\"submit\" disabled={submitting} className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">\r\n            {submitting ? 'Menyimpan...' : 'Tambah Jadwal'}\r\n          </button>\r\n        </form>\r\n      )}\r\n\r\n      {loading ? <p className=\"text-gray-500\">Loading...</p> :\r\n        filteredJadwal.length > 0 ? (\r\n          <div className=\"space-y-4\">\r\n            {filteredJadwal.map(item => (\r\n              <div key={item.id} className=\"border-l-4 border-indigo-400 p-4 bg-gray-50 hover:bg-gray-100 transition rounded-md flex justify-between items-start\">\r\n                <div>\r\n                  <h3 className=\"text-lg font-semibold text-gray-800\">{item.mata_kuliah}</h3>\r\n                  <p className=\"text-sm text-gray-600 mt-1\">\r\n                    <strong>{item.hari}</strong> | {item.waktu_mulai} - {item.waktu_selesai} WIB | Ruangan: {item.ruangan} | Dosen: {item.dosen}\r\n                  </p>\r\n                </div>\r\n                {isAdmin && (\r\n                  <button onClick={() => handleDelete(item.id)} className=\"text-red-500 hover:text-red-700 font-bold cursor-pointer\">\r\n                    Hapus\r\n                  </button>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <p className=\"text-center py-10 text-gray-500\">Tidak ada jadwal pada hari <strong>{selectedDay}</strong>.</p>\r\n        )\r\n      }\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}